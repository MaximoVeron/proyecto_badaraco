<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EducAR - Panel Docente</title>
    <link rel="icon" href="images/favicon.png" type="image/png" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Lato:wght@400;700&family=Oswald:wght@500&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="stylesheet" href="../../assets/css/style.css" />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <style>
      /* Sugerencia: Scroll suave para anclas de navegación */
      html {
        scroll-behavior: smooth;
      }
    </style>
  </head>
  <body>
    <header class="bg-primary text-white py-3 shadow-lg">
      <nav class="navbar navbar-expand-lg navbar-dark container">
        <a
          class="navbar-brand d-flex align-items-center"
          href="home_docentes.html"
        >
          <img
            src="../../assets/images/logo_titulo.png"
            loading="lazy"
            alt="EducAR Logo"
            class="me-2 logo-navbar"
          />
          <span class="fw-bold fs-4 text-uppercase">EducAR Docentes</span>
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto align-items-center">
            <li class="nav-item">
              <a
                class="nav-link active no-hover"
                aria-current="page"
                href="#bienvenida"
                >Inicio Docente</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="#"
                data-bs-toggle="modal"
                data-bs-target="#profileModal"
              >
                <i class="bi bi-person-circle me-2"></i> Perfil</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#mis-clases">Mis Clases</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#alumnos">Alumnos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#recursos">Recursos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#informes">Informes</a>
            </li>
            <li class="nav-item ms-lg-3">
              <button
                class="btn btn-danger rounded-pill px-4"
                data-bs-toggle="modal"
                data-bs-target="#logoutModal"
              >
                <i class="bi bi-box-arrow-right me-1"></i> Salir
              </button>
            </li>
          </ul>
        </div>
      </nav>
    </header>

    <main>
      <section
        id="bienvenida"
        class="hero-section hero-bienvenida-docente text-center text-white d-flex align-items-center justify-content-center"
        data-aos="fade-up"
        data-aos-duration="1500"
        aria-label="Bienvenida y presentación del docente"
      >
        <div class="container">
          <h1
            class="display-3 fw-bold mb-4"
            data-aos="zoom-in"
            data-aos-delay="500"
          >
            ¡Bienvenido/a,
            <span class="text-warning" id="nombre-docente"
              > Profe Fran Villalba </span
            >! 👋
          </h1>
          <p class="lead mb-5" data-aos="fade-up" data-aos-delay="800">
            Tu panel de control para potenciar el aprendizaje en tus clases.
          </p>
          <a
            href="#mis-clases"
            class="btn btn-primary btn-lg rounded-pill px-5 py-3 shadow-lg"
            data-aos="fade-up"
            data-aos-delay="1000"
            >Comenzar</a
          >
        </div>
      </section>

      <section id="mis-clases" class="py-5 bg-light-gradient">
        <div class="container">
          <h2
            class="text-center mb-5 display-4 fw-bold text-primary"
            data-aos="fade-down"
          >
            Mis <span class="text-secondary">Clases</span> Asignadas
          </h2>
          <div class="row g-4" id="static-class-cards-container">
            <div
              class="col-md- col-lg-4"
              data-aos="fade-up"
              data-aos-delay="100"
            >
              <div
                class="card h-100 shadow-sm border-0 text-center p-4 feature-card"
              >
                <div class="icon-circle bg-secondary text-white mx-auto mb-3">
                  <i class="bi bi-person-badge fs-2"></i>
                </div>
                <div class="card-body">
                  <h5 class="card-title fw-bold text-primary">
                    1º Grado "A"
                  </h5>
                  <p class="card-text">
                    25 alumnos activos. Última actividad: Lengua.
                  </p>
                  <a
                    href="#"
                    class="btn btn-outline-secondary mt-3 rounded-pill open-view-students-modal"
                    data-class-id="class_1A"
                    data-class-name='1º Grado "A"'
                    >Ver Clase</a
                  >
                </div>
              </div>
            </div>
            <div
              class="col-md-4 col-lg-4"
              data-aos="fade-up"
              data-aos-delay="100"
            >
              <div
                class="card h-100 shadow-sm border-0 text-center p-4 feature-card"
              >
                <div class="icon-circle bg-success text-white mx-auto mb-3">
                  <i class="bi bi-person-badge-fill fs-2"></i>
                </div>
                <div class="card-body">
                  <h5 class="card-title fw-bold text-primary">
                    2º Grado "B"
                  </h5>
                  <p class="card-text">
                    22 alumnos activos. Última actividad: Matemática.
                  </p>
                  <a
                    href="#"
                    class="btn btn-outline-success mt-3 rounded-pill open-view-students-modal"
                    data-class-id="class_2B"
                    data-class-name='2º Grado "B"'
                    >Ver Clase</a
                  >
                </div>
              </div>
            </div>
            <div
              class="col-md-6 col-lg-4"
              data-aos="fade-up"
              data-aos-delay="500"
            >
              <div
                class="card h-100 shadow-sm border-0 text-center p-4 feature-card"
              >
                <div class="icon-circle bg-info text-white mx-auto mb-3">
                  <i class="bi bi-person-badge-fill fs-2"></i>
                </div>
                <div class="card-body">
                  <h5 class="card-title fw-bold text-primary">
                    3º Grado "C"
                  </h5>
                  <p class="card-text">
                    20 alumnos activos. Última actividad: Ciencias Sociales.
                  </p>
                  <a
                    href="#"
                    class="btn btn-outline-info mt-3 rounded-pill open-view-students-modal"
                    data-class-id="class_3C"
                    data-class-name='3º Grado "C"'
                    >Ver Clase</a
                  >
                </div>
              </div>
            </div>
          </div>

          <div class="container py-5">
            <div class="row justify-content-center">
              <div class="col-lg-10" data-aos="fade-up" data-aos-delay="200">
                <h2 class="text-center text-primary mb-4">Gestionar Mis Clases</h2>
                <ul class="nav nav-tabs mb-3" id="classTabs" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button
                      class="nav-link active"
                      id="create-class-tab"
                      data-bs-toggle="tab"
                      data-bs-target="#create-class"
                      type="button"
                      role="tab"
                      aria-controls="create-class"
                      aria-selected="true"
                    >
                      <i class="bi bi-plus-circle-fill me-2"></i> Crear Nueva Clase
                    </button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button
                      class="nav-link"
                      id="add-students-tab"
                      data-bs-toggle="tab"
                      data-bs-target="#add-students"
                      type="button"
                      role="tab"
                      aria-controls="add-students"
                      aria-selected="false"
                    >
                      <i class="bi bi-person-plus-fill me-2"></i> Añadir Alumnos
                    </button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button
                      class="nav-link"
                      id="my-classes-tab"
                      data-bs-toggle="tab"
                      data-bs-target="#my-classes"
                      type="button"
                      role="tab"
                      aria-controls="my-classes"
                      aria-selected="false"
                    >
                      <i class="bi bi-book-fill me-2"></i> Mis Clases Existentes
                    </button>
                  </li>
                </ul>
                <div class="tab-content" id="classTabsContent">
                  <div
                    class="tab-pane fade show active"
                    id="create-class"
                    role="tabpanel"
                    aria-labelledby="create-class-tab"
                  >
                    <div class="card shadow p-4 mb-4">
                      <h4 class="card-title mb-3 text-center">Crear Nueva Clase</h4>
                      <form id="createClassForm">
                        <div class="mb-3">
                          <label for="className" class="form-label"
                            >Nombre de la Clase:</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="className"
                            placeholder="Ej. Matemáticas Grado 5"
                            required
                          />
                        </div>
                        <div class="mb-3">
                          <label for="classDescription" class="form-label"
                            >Descripción (opcional):</label
                          >
                          <textarea
                            class="form-control"
                            id="classDescription"
                            rows="3"
                            placeholder="Una breve descripción de la clase"
                          ></textarea>
                        </div>
                        <div class="d-grid">
                          <button
                            type="submit"
                            class="btn btn-success rounded-pill"
                          >
                            <i class="bi bi-plus-circle-fill me-2"></i> Crear Clase
                          </button>
                        </div>
                        <div id="createClassMessage" class="mt-3 text-center"></div>
                      </form>
                    </div>
                  </div>

                  <div
                    class="tab-pane fade"
                    id="add-students"
                    role="tabpanel"
                    aria-labelledby="add-students-tab"
                  >
                    <div class="card shadow p-4 mb-4">
                      <h4 class="card-title mb-3 text-center">Añadir Alumnos a una Clase</h4>
                      <form id="addStudentsToClassForm">
                        <div class="mb-3">
                          <label for="selectClassToAddStudents" class="form-label"
                            >Selecciona una Clase:</label
                          >
                          <select
                            class="form-select"
                            id="selectClassToAddStudents"
                            required
                          >
                            <option value="">Cargando clases...</option>
                          </select>
                        </div>
                        <div class="mb-3">
                          <label for="studentEmails" class="form-label"
                            >Emails de los Alumnos (uno por línea):</label
                          >
                          <textarea
                            class="form-control"
                            id="studentEmails"
                            rows="5"
                            placeholder="alumno1@example.com&#10;alumno2@example.com"
                            required
                          ></textarea>
                          <small class="form-text text-muted"
                            >Introduce un email por línea para añadir múltiples alumnos.</small
                          >
                        </div>
                        <div class="d-grid">
                          <button
                            type="submit"
                            class="btn btn-primary rounded-pill"
                          >
                            <i class="bi bi-person-plus-fill me-2"></i> Añadir Alumnos
                          </button>
                        </div>
                        <div id="addStudentsMessage" class="mt-3 text-center"></div>
                      </form>
                    </div>
                  </div>

                  <div
                    class="tab-pane fade"
                    id="my-classes"
                    role="tabpanel"
                    aria-labelledby="my-classes-tab"
                  >
                    <div class="card shadow p-4 mb-4">
                      <h4 class="card-title mb-3 text-center">Mis Clases</h4>
                      <p class="text-center text-muted" id="myClassesLoadingMessage">
                        1. Matemática
                        2. Lengua
                        3. Ciencias Sociales
                        4. ciencias Naturales
                        5. Mas clases                   
                      </p>
                      <ul id="myClassesList" class="list-group"></ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="alumnos" class="py-5">
        <div class="container">
          <h2
            class="text-center mb-5 display-4 fw-bold text-primary"
            data-aos="fade-down"
          >
            Seguimiento de <span class="text-warning">Alumnos</span>
          </h2>
          <div class="row justify-content-center">
            <div class="col-lg-10" data-aos="fade-up">
              <div class="card shadow-lg border-0 p-4">
                <div class="card-body">
                  <h5 class="card-title fw-bold text-secondary mb-4">
                    Actividad Reciente de Alumnos
                  </h5>
                  <ul class="list-group list-group-flush">
                    <li
                      class="list-group-item d-flex justify-content-between align-items-center"
                    >
                      <div>
                        <i class="bi bi-mortarboard-fill me-2 text-primary"></i>
                        <span class="fw-bold">Juan Pérez</span> (1ºA)
                        <br /><small
                          >Completó: "Suma de dos dígitos" y obtuvo 8/10.</small
                        >
                      </div>
                      <span class="badge bg-success">Actividad Nueva</span>
                    </li>
                    <li
                      class="list-group-item d-flex justify-content-between align-items-center"
                    >
                      <div>
                        <i class="bi bi-mortarboard-fill me-2 text-primary"></i>
                        <span class="fw-bold">María Gómez</span> (2ºB)
                        <br /><small>Inicio: "Los ecosistemas y sus habitantes".</small>
                      </div>
                      <span class="badge bg-info">En Progreso</span>
                    </li>
                    <li
                      class="list-group-item d-flex justify-content-between align-items-center"
                    >
                      <div>
                        <i class="bi bi-mortarboard-fill me-2 text-primary"></i>
                        <span class="fw-bold">Lucas Torres</span> (1ºA)
                        <br /><small>Revisó: "Vocabulario de animales".</small>
                      </div>
                      <span class="badge bg-secondary">Revisión</span>
                    </li>
                  </ul>
                  <div class="text-center mt-4">
                    <a href="#" class="btn btn-outline-primary rounded-pill"
                      >Ver todos los alumnos y su progreso</a
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="recursos" class="py-5 bg-light-gradient">
        <div class="container">
          <h2
            class="text-center mb-5 display-4 fw-bold text-primary"
            data-aos="fade-down"
          >
            Biblioteca de
            <span class="text-secondary">Recursos</span> Educativos
          </h2>
          <div class="row g-4">
            <div class="col-md-4" data-aos="zoom-in" data-aos-delay="100">
              <div class="card h-100 shadow-sm border-0 p-4 profile-card">
                <img
                  src="../../assets/images/img_docentes/categoria_lengua_logo.jpg"
                  loading="lazy"
                  class="card-img-top mx-auto mb-3 profile-img-ninos"
                  alt="Recursos Lengua"
                />
                <div class="card-body">
                  <h5 class="card-title fw-bold text-primary">
                    Lengua y Comunicación
                  </h5>
                  <p class="card-text">
                    Materiales didácticos, guías de lectura y juegos de palabras.
                  </p>
                  <a
                    href="https://buenosaires.gob.ar/educacion/material-para-estudiantes-y-docentes-nivel-primario"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="btn btn-sm btn-outline-primary mt-2 rounded-pill"
                  >
                    Explorar
                  </a>
                </div>
              </div>
            </div>
            <div class="col-md-4" data-aos="zoom-in" data-aos-delay="300">
              <div class="card h-100 shadow-sm border-0 p-4 profile-card">
                <img
                  src="../../assets/images/img_docentes/categoria_matematicas_logo.jpg"
                  loading="lazy"
                  class="card-img-top mx-auto mb-3 profile-img-docentes"
                  alt="Recursos Matemática"
                />
                <div class="card-body">
                  <h5 class="card-title fw-bold text-primary">
                    Matemática y Lógica
                  </h5>
                  <p class="card-text">
                    Ejercicios interactivos, problemas resueltos y retos
                    matemáticos.
                  </p>
                  <a
                    href="https://www.educ.ar/buscador?subjects=24&modalities=9&audiences=2&tag_resources=135"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="btn btn-sm btn-outline-success mt-2 rounded-pill"
                    >Explorar</a
                  >
                </div>
              </div>
            </div>
            <div class="col-md-4" data-aos="zoom-in" data-aos-delay="500">
              <div class="card h-100 shadow-sm border-0 p-4 profile-card">
                <img
                  src="../../assets/images/img_docentes/categoria_sociales_logo.jpg"
                  loading="lazy"
                  class="card-img-top mx-auto mb-3 profile-img-familias"
                  alt="Recursos Ciencias"
                />
                <div class="card-body">
                  <h5 class="card-title fw-bold text-primary">
                    Ciencias y Sociedad
                  </h5>
                  <p class="card-text">
                    Experimentos virtuales, atlas interactivos y temas de geografía
                    e historia.
                  </p>
                  <a
                    href="https://continuemosestudiando.abc.gob.ar/tag/materiales/"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="btn btn-sm btn-outline-info mt-2 rounded-pill"
                    >Explorar</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="informes" class="py-5">
        <div class="container">
          <h2
            class="text-center mb-5 display-4 fw-bold text-primary"
            data-aos="fade-down"
          >
            Generación de <span class="text-warning">Informes</span>
          </h2>
          <div class="row justify-content-center">
            <div class="col-md-8" data-aos="fade-up">
              <div class="card shadow-lg border-0 p-4">
                <div class="card-body text-center">
                  <h5 class="card-title fw-bold text-secondary mb-3">
                    Obtén Datos Clave de Progreso
                  </h5>
                  <p class="card-text mb-4">
                    Analiza el rendimiento de tus alumnos y toma decisiones
                    informadas.
                  </p>
                  <p class="card-text mb-4">
                    Genera informes detallados sobre el desempeño individual o
                    grupal de tus alumnos.
                  </p>
                  <button class="btn btn-primary btn-lg rounded-pill px-4 me-3">
                    <i class="bi bi-file-earmark-bar-graph me-2"></i> Informe por Alumno
                  </button>
                  <button class="btn btn-success btn-lg rounded-pill px-4">
                    <i class="bi bi-clipboard-data me-2"></i> Informe por Clase
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <section id="contacto-docente" class="py-5 bg-light">
        <div class="container">
          <h2
            class="text-center mb-5 display-4 fw-bold text-primary"
            data-aos="fade-down"
          >
            Enviar <span class="text-secondary">Aviso</span>
          </h2>
          <div class="row justify-content-center">
            <div class="col-md-8" data-aos="fade-up">
              <form
                id="contactDocenteForm"
                class="p-4 border rounded shadow-sm bg-white"
              >
                <div class="mb-3">
                  <label for="docenteTarget" class="form-label">
                    <i class="bi bi-send-fill me-2"></i>Para:
                  </label>
                  <select
                    class="form-select"
                    id="docenteTarget"
                    multiple
                    aria-label="Selecciona a quién va dirigido el aviso"
                    required
                  >
                    <option value=" " disabled>Selecciona destinatarios...</option>
                    <option value="all-classes">Todas mis clases</option>
                    <option value="class-1A">Clase 1º A</option>
                    <option value="class-2B">Clase 2º B</option>
                    <option value="class-3C">Clase 3º C</option>
                    <option value="admin">Administración</option>
                    <option value="support">Soporte Técnico</option>
                  </select>
                  <small class="form-text text-muted"
                    >Mantén 'Ctrl' o 'Cmd' presionado para seleccionar múltiples
                    opciones.</small
                  >
                </div>
                <div class="mb-3">
                  <label for="docenteSubject" class="form-label">
                    <i class="bi bi-chat-left-text-fill me-2"></i>Asunto
                  </label>
                  <input
                    type="text"
                    class="form-control"
                    id="docenteSubject"
                    required
                    placeholder="Motivo de tu consulta (ej. Soporte, Sugerencia)"
                  />
                </div>
                <div class="mb-3">
                  <label for="docenteMessage" class="form-label"
                    ><i class="bi bi-chat-dots-fill me-2"></i>Tu Mensaje
                  </label>
                  <textarea
                    class="form-control"
                    id="docenteMessage"
                    rows="5"
                    required
                    placeholder="Describe tu consulta o sugerencia..."
                  ></textarea>
                </div>
                <div class="d-grid">
                  <button
                    type="submit"
                    class="btn btn-primary btn-lg rounded-pill"
                  >
                    <i class="bi bi-send-fill me-2"></i> Enviar
                  </button>
                </div>
                <div
                  id="contactDocenteFormMessage"
                  class="mt-3 text-center"
                ></div>
              </form>
            </div>
          </div>
        </div>
      </section>

      <section
        class="cta-section bg-secondary text-white py-5 text-center"
        data-aos="fade-up"
      >
        <div class="container">
          <h2 class="display-5 fw-bold mb-4 text-dark">
            ¿Necesitas <span class="text-primary">Ayuda</span> o tienes
            <span class="text-primary">Sugerencias</span>?
          </h2>
          <p class="lead mb-5 text-dark">
            Estamos aquí para apoyarte en tu labor educativa.
          </p>
          <a
            href="#contacto-docente"
            class="btn btn-primary btn-lg rounded-pill px-5 py-3 shadow-lg cta-button"
          >
            <i class="bi bi-chat-dots-fill me-2"></i> Contactar Soporte
          </a>
        </div>
      </section>
    </main>

    <footer class="bg-dark text-white py-4">
      <div class="container text-center">
        <p class="mb-0">
          &copy; 2024 EducAR. Todos los derechos reservados. |
          <a
            href="#"
            class="text-warning text-decoration-none"
            data-bs-toggle="modal"
            data-bs-target="#modalPrivacidad"
            >Política de Privacidad</a
          >
          |
          <a
            href="#"
            class="text-warning text-decoration-none"
            data-bs-toggle="modal"
            data-bs-target="#modalTerminos"
            >Términos de Servicio
          </a>
        </p>
        <div class="mt-2">
          <a href="#" aria-label="Facebook" class="text-white mx-2"
            ><i class="bi bi-facebook fs-4"></i
          ></a>
          <a href="#" aria-label="Twitter" class="text-white mx-2"
            ><i class="bi bi-twitter fs-4"></i
          ></a>
          <a href="#" aria-label="Instagram" class="text-white mx-2"
            ><i class="bi bi-instagram fs-4"></i
          ></a>
          <a href="#" aria-label="LinkedIn" class="text-white mx-2"
            ><i class="bi bi-linkedin fs-4"></i
          ></a>
        </div>
      </div>
    </footer>

    <div
      class="modal fade"
      id="modalPrivacidad"
      tabindex="-1"
      aria-labelledby="modalPrivacidadLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalPrivacidadLabel">
              Política de Privacidad
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Cerrar"
            ></button>
          </div>
          <div class="modal-body">
            <p><strong>1. Compromiso con la privacidad</strong></p>
            <p>
              En EducAR, la privacidad y seguridad de nuestros usuarios es una
              prioridad, especialmente cuando se trata de niños de primer a
              tercer grado de primaria. Diseñamos esta política para explicar
              de forma clara y sencilla qué información recopilamos, cómo la
              usamos, y qué medidas tomamos para protegerla.
            </p>

            <p><strong>2. ¿Qué información recopilamos?</strong></p>
            <p>
              EducAR no recopila datos personales sensibles de los niños sin el
              consentimiento de los padres, tutores o representantes legales. La
              información que se puede recopilar incluye:
            </p>
            <ul>
              <li>
                Nombre y correo electrónico del docente o tutor (al crear una
                cuenta para uso educativo).
              </li>
              <li>
                Nombre del estudiante (opcional y solo si el tutor lo autoriza).
              </li>
              <li>
                Progreso académico, resultados de actividades y tiempo de uso
                (para fines pedagógicos).
              </li>
              <li>
                Información técnica como tipo de dispositivo, navegador y
                sistema operativo (para mejorar la experiencia de usuario).
              </li>
            </ul>

            <p><strong>3. Uso de la información</strong></p>
            <p>
              La información recopilada se utiliza exclusivamente para los
              siguientes fines:
            </p>
            <ul>
              <li>
                Personalizar la experiencia de aprendizaje según el nivel y
                progreso del estudiante.
              </li>
              <li>
                Brindar acceso a contenidos educativos validados por docentes.
              </li>
              <li>
                Garantizar un entorno seguro, libre de publicidad y
                distracciones.
              </li>
              <li>
                Mejorar continuamente la plataforma a través de datos de uso
                agregados y anónimos.
              </li>
              <li>
                <strong
                  >EducAR no vende, alquila ni comparte datos personales con
                  terceros con fines comerciales.</strong
                >
              </li>
            </ul>

            <p><strong>4. Seguridad de los datos</strong></p>
            <p>
              Implementamos medidas técnicas y organizativas apropiadas para
              proteger los datos:
            </p>
            <ul>
              <li>
                Cifrado de información durante la transmisión y el
                almacenamiento.
              </li>
              <li>Accesos restringidos únicamente a personal autorizado.</li>
              <li>
                Supervisión constante de la plataforma para prevenir accesos no
                autorizados o actividades maliciosas.
              </li>
            </ul>

            <p><strong>5. Participación y control de los adultos</strong></p>
            <p>
              Los padres, tutores y docentes tienen control sobre la información
              relacionada con los niños. Pueden:
            </p>
            <ul>
              <li>
                Solicitar la revisión o eliminación de los datos personales
                almacenados.
              </li>
              <li>
                Configurar el nivel de acceso y privacidad del estudiante.
              </li>
              <li>
                Comunicar cualquier preocupación de seguridad o privacidad a
                través de nuestros canales de contacto.
              </li>
            </ul>

            <p><strong>6. Cookies y tecnologías similares</strong></p>
            <p>
              EducAR utiliza cookies esenciales para el funcionamiento de la
              plataforma, como mantener la sesión iniciada o recordar
              preferencias. No utilizamos cookies con fines publicitarios ni de
              rastreo comercial.
            </p>

            <p><strong>7. Cambios en esta política</strong></p>
            <p>
              Podremos actualizar esta Política de Privacidad ocasionalmente
              para reflejar mejoras o cambios normativos. Notificaremos
              cualquier cambio importante a través de la plataforma o por correo
              electrónico a los usuarios registrados.
            </p>

            <p><strong>8. Contacto</strong></p>
            <p>
              Si tienes preguntas sobre esta política o deseas ejercer tus
              derechos de acceso, rectificación o eliminación de datos, por
              favor contáctanos en:
            </p>

            <ul>
              <li>📧 privacidad@educar.org</li>
              <li>📍 Formosa, Argentina</li>
            </ul>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cerrar
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal fade"
      id="modalTerminos"
      tabindex="-1"
      aria-labelledby="modalTerminosLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalTerminosLabel">
              Términos de Servicio
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Cerrar"
            ></button>
          </div>
          <div class="modal-body">
            <p><strong>1.Términos y condiciones</strong></p>
            <p>
              Al acceder o utilizar EducAR, usted acepta estos Términos de
              Servicio. Si no está de acuerdo con alguno de ellos, por favor no
              utilice la plataforma. El uso de EducAR implica la aceptación
              plena de estas condiciones.
            </p>

            <p><strong>2. Descripción del servicio</strong></p>
            <p>
              EducAR es una plataforma digital orientada a estudiantes de primer
              a tercer grado de primaria. Ofrece contenidos educativos diseñados
              por docentes, con enfoque en la seguridad, accesibilidad y
              alineación curricular. Nuestro objetivo es facilitar un
              aprendizaje significativo y protegido para niños y niñas en sus
              primeros años escolares.
            </p>

            <p><strong>3. Público destinatario</strong></p>
            <p>EducAR está destinado a:</p>
            <ul>
              <li>
                Niños y niñas de 6 a 9 años que cursan del 1º al 3º grado de
                primaria.
              </li>
              <li>Docentes del nivel primario.</li>
              <li>
                Padres, madres y tutores que acompañan el aprendizaje desde el
                hogar.
              </li>
            </ul>
            <p>
              Los menores deben utilizar la plataforma bajo la supervisión de un
              adulto responsable.
            </p>

            <p><strong>4. Registro de usuarios</strong></p>
            <p>
              Para utilizar ciertas funciones, es posible que se requiera la
              creación de una cuenta. El registro podrá incluir información
              básica como nombre del tutor o docente, dirección de correo
              electrónico y, opcionalmente, nombre del estudiante. Este registro
              tiene como fin organizar el uso educativo y personalizar los
              contenidos.
            </p>

            <p><strong>5. Obligaciones del usuario</strong></p>
            <p>Los usuarios se comprometen a:</p>
            <ul>
              <li>
                Utilizar la plataforma con fines exclusivamente educativos.
              </li>
              <li>Proporcionar información veraz durante el registro.</li>
              <li>
                No dañar, alterar o interferir with el funcionamiento del
                sistema.
              </li>
              <li>
                No intentar acceder sin autorización a secciones restringidas o
                a los datos de otros usuarios.
              </li>
            </ul>

            <p><strong>6. Contenidos y derechos de autor</strong></p>
            <p>
              Todos los contenidos ofrecidos en EducAR, incluyendo textos,
              gráficos, sonidos y recursos interactivos, son propiedad de la
              plataforma o de sus respectivos autores. Está prohibida su
              reproducción, distribución o modificación sin autorización previa.
            </p>

            <p><strong>7. Entorno seguro y libre de publicidad</strong></p>
            <p>
              EducAR no contiene anuncios publicitarios, ni enlaces a sitios
              externos no verificados. El diseño de la plataforma prioriza la
              seguridad digital de los menores y evita distracciones que puedan
              interferir con el aprendizaje.
            </p>

            <p><strong>8. Limitación de responsabilidad</strong></p>
            <p>
              EducAR no garantiza la disponibilidad ininterrumpida del servicio,
              pero se compromete a mantenerlo actualizado y en funcionamiento.
              La plataforma no reemplaza la función pedagógica del docente, sino
              que la complementa.
            </p>

            <p><strong>9. Modificaciones de los términos</strong></p>
            <p>
              Podremos actualizar estos Términos de Servicio en cualquier
              momento. Los cambios se notificarán a través de la plataforma o
              por correo electrónico. El uso continuado del servicio implica la
              aceptación de los términos actualizados.
            </p>

            <p><strong>10. Contacto</strong></p>
            <p>
              Si tienes dudas o sugerencias sobre estos Términos, puedes
              contactarnos en:
            </p>
            <ul>
              <li>📧 soporte@educar.org</li>
              <li>📍 Formosa, Argentina</li>
            </ul>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cerrar
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal fade"
      id="logoutModal"
      tabindex="-1"
      aria-labelledby="logoutModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-danger text-white">
            <h5 class="modal-title" id="logoutModalLabel">Cerrar Sesión</h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">¿Estás seguro de que quieres cerrar tu sesión?</div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
              Cancelar
            </button>
            <button type="button" class="btn btn-danger" id="confirmLogoutBtn">
              Sí, Salir
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal fade"
      id="profileModal"
      tabindex="-1"
      aria-labelledby="profileModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <h5 class="modal-title" id="profileModalLabel">
              <i class="bi bi-person-circle me-2"></i> Mi Perfil
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="updateProfileFormDocente">
              <div class="mb-3">
                <label for="currentUserNameDocente" class="form-label">Nombre Actual:</label>
                <input
                  type="text"
                  class="form-control"
                  id="currentUserNameDocente"
                  readonly
                />
              </div>
              <div class="mb-3">
                <label for="newUserNameDocente" class="form-label">Nuevo Nombre:</label>
                <input
                  type="text"
                  class="form-control"
                  id="newUserNameDocente"
                  placeholder="Introduce tu nuevo nombre"
                />
              </div>
              <div id="updateProfileMessageDocente" class="mt-3 text-center"></div>
              <div class="d-grid gap-2 mt-4">
                <button type="submit" class="btn btn-primary">
                  Actualizar Perfil
                </button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                  Cerrar
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal fade"
      id="viewStudentsModal"
      tabindex="-1"
      aria-labelledby="viewStudentsModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="viewStudentsModalLabel">
              Alumnos en <span id="modalClassName"></span>
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div id="studentsListContainer">
              <p class="text-center text-muted" id="loadingStudentsMessage">Cargando alumnos...</p>
              <ul id="classStudentsList" class="list-group"></ul>
              <div
                id="noStudentsMessage"
                class="alert alert-info text-center mt-3"
                style="display: none"
              >
                No hay alumnos inscritos en esta clase aún.
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
              Cerrar
            </button>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Inicialización de AOS
        AOS.init({
          once: true, // Animaciones se reproducen solo una vez
          mirror: false, // No repetir animaciones al hacer scroll hacia arriba
        });

        // Instancia del modal de perfil para poder cerrarlo programáticamente
        const profileModal = new bootstrap.Modal(
          document.getElementById("profileModal")
        );
        // Instancia del modal de ver alumnos
        const viewStudentsModal = new bootstrap.Modal(
          document.getElementById("viewStudentsModal")
        );

        // --- Funciones de Utilidad ---

        // Función para cargar y mostrar el nombre del docente
        function loadAndDisplayTeacherName() {
          const nameSpan = document.getElementById("nombre-docente");
          const userName = localStorage.getItem("userName") || "Docente"; // Obtener del localStorage o usar valor por defecto
          if (nameSpan) {
            nameSpan.textContent = userName;
          }
        }

        // Validación básica de email
        function isValidEmail(email) {
          return /\S+@\S+\.\S+/.test(email);
        }

        // --- Configuración de Event Listeners ---

        // Configuración del botón de salir (logout)
        function setupLogoutButton() {
          const logoutConfirmBtn = document.getElementById("confirmLogoutBtn");
          if (logoutConfirmBtn) {
            logoutConfirmBtn.addEventListener("click", function () {
              localStorage.removeItem("token"); // Elimina el token de sesión
              localStorage.removeItem("userName"); // Elimina también el nombre del usuario
              window.location.href = "../../pages/index.html"; // Redirige a la página de inicio
            });
          }
        }

        // Configuración del formulario de contacto del docente
        function setupContactDocenteForm() {
          const contactDocenteForm = document.getElementById("contactDocenteForm");
          const contactDocenteFormMessage = document.getElementById(
            "contactDocenteFormMessage"
          );

          if (contactDocenteForm) {
            contactDocenteForm.addEventListener("submit", function (event) {
              event.preventDefault();

              const docenteTarget = document.getElementById("docenteTarget").value;
              const docenteSubject = document.getElementById("docenteSubject").value;
              const docenteMessage = document.getElementById("docenteMessage").value;

              if (!docenteTarget || !docenteSubject || !docenteMessage) {
                contactDocenteFormMessage.innerHTML =
                  '<div class="alert alert-warning" role="alert">Por favor, rellena todos los campos.</div>';
                return;
              }

              // Simulación de envío a un backend
              console.log("Enviando aviso:", {
                docenteTarget,
                docenteSubject,
                docenteMessage,
              });

              // Por ahora, solo muestra un mensaje de éxito
              contactDocenteFormMessage.innerHTML =
                '<div class="alert alert-success" role="alert">¡Mensaje enviado exitosamente!.</div>';
              contactDocenteForm.reset(); // Limpia el formulario
            });
          }
        }

        // Configuración del modal de perfil del docente
        function setupProfileModalHandlers() {
          const updateProfileFormDocente = document.getElementById(
            "updateProfileFormDocente"
          );
          const currentUserNameDocente = document.getElementById(
            "currentUserNameDocente"
          );
          const newUserNameInputDocente = document.getElementById(
            "newUserNameDocente"
          );
          const updateProfileMessageDocente = document.getElementById(
            "updateProfileMessageDocente"
          );

          // Evento que se dispara cuando el modal de perfil se muestra
          document
            .getElementById("profileModal")
            .addEventListener("show.bs.modal", function () {
              const userName = localStorage.getItem("userName") || "Docente";
              if (currentUserNameDocente) {
                currentUserNameDocente.value = userName; // Rellena el nombre actual
              }
              newUserNameInputDocente.value = ""; // Limpia el campo de nuevo nombre
              updateProfileMessageDocente.innerHTML = ""; // Limpia mensajes anteriores
            });

          if (updateProfileFormDocente) {
            updateProfileFormDocente.addEventListener("submit", async function (event) {
              event.preventDefault();

              const newName = newUserNameInputDocente.value.trim();
              if (!newName) {
                updateProfileMessageDocente.innerHTML =
                  '<div class="alert alert-warning" role="alert">Por favor, introduce un nombre.</div>';
                return;
              }

              const token = localStorage.getItem("token");
              if (!token) {
                updateProfileMessageDocente.innerHTML =
                  '<div class="alert alert-danger" role="alert">No se encontró token de autenticación. Por favor, inicia sesión de nuevo.</div>';
                return;
              }

              try {
                // Simulación de llamada a la API para actualizar el perfil
                const response = await fetch("/api/auth/profile", {
                  method: "PUT",
                  headers: {
                    "Content-Type": "application/json",
                    Authorization: `Bearer ${token}`,
                  },
                  body: JSON.stringify({ nombre: newName }),
                });

                const data = await response.json(); // Asume que el backend devuelve un JSON

                if (response.ok) {
                  updateProfileMessageDocente.innerHTML = `<div class="alert alert-success" role="alert">${
                    data.message || "Perfil actualizado exitosamente."
                  }</div>`;
                  localStorage.setItem("userName", newName); // Actualiza el nombre en localStorage
                  loadAndDisplayTeacherName(); // Actualiza el nombre en la bienvenida

                  // Cerrar el modal después de un breve retraso
                  setTimeout(() => {
                    profileModal.hide();
                  }, 1500);
                } else {
                  updateProfileMessageDocente.innerHTML = `<div class="alert alert-danger" role="alert">${
                    data.message || "Error al actualizar el perfil."
                  }</div>`;
                }
              } catch (error) {
                console.error("Error al enviar la solicitud de actualización de perfil:", error);
                updateProfileMessageDocente.innerHTML =
                  '<div class="alert alert-danger" role="alert">Error de conexión al servidor.</div>';
              }
            });
          }
        }

        // Configuración del formulario de Creación de Clases
        function setupClassCreationForm() {
          const createClassForm = document.getElementById("createClassForm");
          const classNameInput = document.getElementById("className");
          const classDescriptionInput =
            document.getElementById("classDescription");
          const createClassMessage =
            document.getElementById("createClassMessage");

          if (createClassForm) {
            createClassForm.addEventListener("submit", async function (event) {
              event.preventDefault();

              const nombre = classNameInput.value.trim();
              const descripcion = classDescriptionInput.value.trim();

              if (!nombre) {
                createClassMessage.innerHTML =
                  '<div class="alert alert-warning" role="alert">El nombre de la clase es requerido.</div>';
                return;
              }

              const token = localStorage.getItem("token");
              if (!token) {
                createClassMessage.innerHTML =
                  '<div class="alert alert-danger" role="alert">No se encontró token de autenticación. Por favor, inicia sesión de nuevo.</div>';
                return;
              }

              try {
                // Simulación de llamada a la API para crear clase
                const response = await fetch("/api/classes/create", {
                  method: "POST",
                  headers: {
                    "Content-Type": "application/json",
                    Authorization: `Bearer ${token}`,
                  },
                  body: JSON.stringify({ nombre, descripcion }),
                });

                const data = await response.json();

                if (response.ok) {
                  createClassMessage.innerHTML = `<div class="alert alert-success" role="alert">${
                    data.message || "Clase creada exitosamente."
                  }</div>`;
                  createClassForm.reset(); // Limpia el formulario
                  // Al crear una clase, actualizamos la lista de clases existentes
                  displayTeacherClasses();
                  loadTeacherClassesForSelection(); // También actualiza el selector para añadir alumnos
                } else {
                  createClassMessage.innerHTML = `<div class="alert alert-danger" role="alert">${
                    data.message || "Error al crear la clase."
                  }</div>`;
                }
              } catch (error) {
                console.error("Error al enviar la solicitud de creación de clase:", error);
                createClassMessage.innerHTML =
                  '<div class="alert alert-danger" role="alert">Error de conexión al servidor al intentar crear la clase.</div>';
              }
            });
          }
        }

        // Configuración del formulario de Añadir Alumnos a Clase
        function setupAddStudentsForm() {
          const addStudentsToClassForm = document.getElementById(
            "addStudentsToClassForm"
          );
          const selectClassToAddStudents = document.getElementById(
            "selectClassToAddStudents"
          );
          const studentEmailsTextarea =
            document.getElementById("studentEmails");
          const addStudentsMessage = document.getElementById("addStudentsMessage");

          if (addStudentsToClassForm) {
            addStudentsToClassForm.addEventListener("submit", async function (event) {
              event.preventDefault();

              const classId = selectClassToAddStudents.value;
              const studentEmailsRaw = studentEmailsTextarea.value.trim();

              if (!classId) {
                addStudentsMessage.innerHTML =
                  '<div class="alert alert-warning" role="alert">Por favor, selecciona una clase.</div>';
                return;
              }
              if (!studentEmailsRaw) {
                addStudentsMessage.innerHTML =
                  '<div class="alert alert-warning" role="alert">Por favor, introduce al menos un email de alumno.</div>';
                return;
              }

              const studentEmails = studentEmailsRaw
                .split("\n")
                .map((email) => email.trim())
                .filter((email) => email !== "");

              // Validación de emails
              const invalidEmails = studentEmails.filter((email) => !isValidEmail(email));
              if (invalidEmails.length > 0) {
                addStudentsMessage.innerHTML = `<div class="alert alert-danger" role="alert">Emails inválidos encontrados: ${invalidEmails.join(
                  ", "
                )}. Por favor, corrige los emails.</div>`;
                return;
              }

              if (studentEmails.length === 0) {
                addStudentsMessage.innerHTML =
                  '<div class="alert alert-warning" role="alert">Por favor, introduce emails válidos.</div>';
                return;
              }

              const token = localStorage.getItem("token");
              if (!token) {
                addStudentsMessage.innerHTML =
                  '<div class="alert alert-danger" role="alert">No se encontró token de autenticación. Por favor, inicia sesión de nuevo.</div>';
                return;
              }

              try {
                // Simulación de llamada a la API para añadir alumnos
                const response = await fetch(`/api/classes/${classId}/students`, {
                  method: "POST",
                  headers: {
                    "Content-Type": "application/json",
                    Authorization: `Bearer ${token}`,
                  },
                  body: JSON.stringify({ studentEmails }),
                });

                const data = await response.json();

                if (response.ok) {
                  let successMsg = `<div class="alert alert-success" role="alert">${
                    data.message || "Alumnos añadidos exitosamente."
                  }</div>`;
                  if (data.failedCount > 0) {
                    successMsg += `<div class="alert alert-warning mt-2" role="alert">Fallaron ${data.failedCount} alumnos:<ul>`;
                    data.failedStudents.forEach((student) => {
                      successMsg += `<li>${student.email}: ${student.reason}</li>`;
                    });
                    successMsg += `</ul></div>`;
                  }
                  addStudentsMessage.innerHTML = successMsg;
                  studentEmailsTextarea.value = ""; // Limpiar el campo de emails
                  // Opcional: Recargar la lista de alumnos en la clase si tuvieras esa vista
                  // loadStudentsForClass(classId, selectClassToAddStudents.options[selectClassToAddStudents.selectedIndex].text);
                } else {
                  addStudentsMessage.innerHTML = `<div class="alert alert-danger" role="alert">${
                    data.message || "Error al añadir alumnos."
                  }</div>`;
                }
              } catch (error) {
                console.error("Error al enviar la solicitud para añadir alumnos:", error);
                addStudentsMessage.innerHTML =
                  '<div class="alert alert-danger" role="alert">Error de conexión al servidor al intentar añadir alumnos.</div>';
              }
            });
          }
        }

        // Función para cargar las clases del docente y popular el selector para AÑADIR ALUMNOS
        async function loadTeacherClassesForSelection() {
          const selectClassToAddStudents = document.getElementById(
            "selectClassToAddStudents"
          );
          const token = localStorage.getItem("token");
          if (!token) {
            selectClassToAddStudents.innerHTML =
              '<option value="">Error: No autenticado</option>';
            return;
          }

          try {
            // Simulación de API para obtener clases
            const response = await fetch("/api/classes/my-classes", {
              method: "GET",
              headers: {
                Authorization: `Bearer ${token}`,
              },
            });
            const classes = await response.json();

            if (response.ok) {
              selectClassToAddStudents.innerHTML =
                '<option value="">Selecciona una clase...</option>';
              if (classes.length > 0) {
                classes.forEach((clase) => {
                  const option = document.createElement("option");
                  option.value = clase.id;
                  option.textContent = clase.nombre;
                  selectClassToAddStudents.appendChild(option);
                });
              } else {
                selectClassToAddStudents.innerHTML =
                  '<option value="">No tienes clases creadas.</option>';
              }
            } else {
              selectClassToAddStudents.innerHTML = `<option value="">Error al cargar clases: ${
                classes.message || "Desconocido"
              }</option>`;
              console.error("Error al cargar clases para selección:", classes);
            }
          } catch (error) {
            console.error("Error de conexión al cargar clases para selección:", error);
            selectClassToAddStudents.innerHTML =
              '<option value="">Error de conexión.</option>';
          }
        }

        // Función para cargar y mostrar los alumnos en el modal de ver alumnos
        async function loadStudentsForClass(classId, className) {
          const studentsList = document.getElementById("classStudentsList");
          const loadingMessage = document.getElementById("loadingStudentsMessage");
          const noStudentsMessage = document.getElementById("noStudentsMessage");
          const modalClassNameSpan = document.getElementById("modalClassName");

          modalClassNameSpan.textContent = className; // Actualiza el nombre de la clase en el modal
          studentsList.innerHTML = ""; // Limpiar la lista anterior
          loadingMessage.style.display = "block"; // Mostrar mensaje de carga
          noStudentsMessage.style.display = "none"; // Ocultar mensaje de no alumnos

          const token = localStorage.getItem("token");
          if (!token) {
            loadingMessage.textContent = "Error: No autenticado.";
            return;
          }

          try {
            // Simulación de API para obtener alumnos de una clase
            const response = await fetch(`/api/classes/${classId}/students`, {
              method: "GET",
              headers: {
                Authorization: `Bearer ${token}`,
              },
            });
            const students = await response.json();

            loadingMessage.style.display = "none"; // Ocultar mensaje de carga

            if (response.ok) {
              if (students.length > 0) {
                students.forEach((student) => {
                  const listItem = document.createElement("li");
                  listItem.className =
                    "list-group-item d-flex justify-content-between align-items-center";
                  listItem.innerHTML = `
                                <div>
                                    <h6 class="mb-1">${student.name}</h6>
                                    <small class="text-muted">${student.email}</small>
                                </div>
                                <span class="badge bg-primary rounded-pill">${student.progress}%</span>
                            `;
                  studentsList.appendChild(listItem);
                });
              } else {
                noStudentsMessage.style.display = "block"; // Mostrar mensaje de no alumnos
              }
            } else {
              loadingMessage.textContent = `Error al cargar alumnos: ${
                students.message || "Desconocido"
              }`;
              noStudentsMessage.style.display = "none";
              console.error("Error al cargar alumnos:", students);
            }
          } catch (error) {
            console.error("Error de conexión al cargar alumnos:", error);
            loadingMessage.textContent = "Error de conexión.";
            noStudentsMessage.style.display = "none";
          }
        }

        // Función para cargar y mostrar las clases en la pestaña "Mis Clases Existentes"
        async function displayTeacherClasses() {
          const myClassesList = document.getElementById("myClassesList");
          const myClassesLoadingMessage = document.getElementById(
            "myClassesLoadingMessage"
          );

          myClassesLoadingMessage.style.display = "block"; // Mostrar mensaje de carga
          myClassesList.innerHTML = ""; // Limpiar la lista existente

          const token = localStorage.getItem("token");
          if (!token) {
            myClassesLoadingMessage.textContent = "Error: No autenticado.";
            return;
          }

          try {
            // Simulación de API para obtener clases del docente
            const response = await fetch("/api/classes/my-classes", {
              method: "GET",
              headers: {
                Authorization: `Bearer ${token}`,
              },
            });
            const classes = await response.json();

            myClassesLoadingMessage.style.display = "none"; // Ocultar mensaje de carga

            if (response.ok) {
              if (classes.length > 0) {
                classes.forEach((clase) => {
                  const listItem = document.createElement("li");
                  listItem.className =
                    "list-group-item d-flex justify-content-between align-items-center class-list-item";
                  const fechaCreacion = new Date(clase.fecha_creacion).toLocaleDateString(
                    "es-ES",
                    {
                      year: "numeric",
                      month: "long",
                      day: "numeric",
                    }
                  );

                  listItem.innerHTML = `
                                <div>
                                    <h5>${clase.nombre}</h5>
                                    <p class="mb-0 text-muted">${clase.descripcion || "Sin descripción"}</p>
                                    <small class="text-muted">ID de Clase: ${clase.id} | Creada: ${fechaCreacion}</small>
                                </div>
                                <div>
                                    <button class="btn btn-sm btn-outline-info me-2 view-students-btn" title="Ver Alumnos" data-class-id="${clase.id}" data-class-name="${clase.nombre}">
                                        <i class="bi bi-people-fill"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger delete-class-btn" title="Eliminar Clase" data-class-id="${clase.id}" data-class-name="${clase.nombre}">
                                        <i class="bi bi-trash-fill"></i>
                                    </button>
                                </div>
                            `;
                  myClassesList.appendChild(listItem);
                });
                attachViewStudentsModalListeners(); // Adjuntar listeners a los nuevos botones
                attachDeleteClassListeners(); // Adjuntar listeners para eliminar clase
              } else {
                myClassesList.innerHTML =
                  '<li class="list-group-item text-muted text-center">No tienes clases creadas aún.</li>';
              }
            } else {
              myClassesList.innerHTML = `<li class="list-group-item text-danger">Error al cargar clases: ${
                classes.message || "Desconocido"
              }</li>`;
              console.error("Error al cargar clases para display:", classes);
            }
          } catch (error) {
            console.error("Error de conexión al cargar clases para display:", error);
            myClassesList.innerHTML =
              '<li class="list-group-item text-danger">Error de conexión.</li>';
          }
        }

        // Función para adjuntar listeners a los botones "Ver Alumnos" (tanto dinámicos como estáticos)
        function attachViewStudentsModalListeners() {
          const viewButtons = document.querySelectorAll(
            ".view-students-btn, .open-view-students-modal"
          );
          viewButtons.forEach((button) => {
            button.removeEventListener("click", handleViewStudentsClick); // Evitar duplicados
            button.addEventListener("click", handleViewStudentsClick);
          });
        }

        function handleViewStudentsClick(event) {
          event.preventDefault();
          const classId = event.currentTarget.dataset.classId;
          const className = event.currentTarget.dataset.className;
          if (classId && className) {
            loadStudentsForClass(classId, className);
            viewStudentsModal.show(); // Mostrar el modal
          }
        }

        // Función para adjuntar listeners a los botones "Eliminar Clase"
        function attachDeleteClassListeners() {
          const deleteButtons = document.querySelectorAll(".delete-class-btn");
          deleteButtons.forEach((button) => {
            button.removeEventListener("click", handleDeleteClassClick); // Evitar duplicados
            button.addEventListener("click", handleDeleteClassClick);
          });
        }

        async function handleDeleteClassClick(event) {
          event.preventDefault();
          const classId = event.currentTarget.dataset.classId;
          const className = event.currentTarget.dataset.className;

          if (confirm(`¿Estás seguro de que quieres eliminar la clase "${className}"? Esta acción no se puede deshacer.`)) {
            const token = localStorage.getItem("token");
            if (!token) {
              alert("Error: No autenticado. Por favor, inicia sesión de nuevo.");
              return;
            }

            try {
              // Simulación de API para eliminar clase
              const response = await fetch(`/api/classes/${classId}`, {
                method: "DELETE",
                headers: {
                  Authorization: `Bearer ${token}`,
                },
              });

              if (response.ok) {
                alert(`Clase "${className}" eliminada exitosamente.`);
                displayTeacherClasses(); // Recargar la lista de clases
                loadTeacherClassesForSelection(); // Recargar el selector de clases
              } else {
                const data = await response.json();
                alert(`Error al eliminar la clase: ${data.message || "Desconocido"}`);
              }
            } catch (error) {
              console.error("Error de conexión al eliminar clase:", error);
              alert("Error de conexión al servidor al intentar eliminar la clase.");
            }
          }
        }

        // --- Inicialización Principal ---
        loadAndDisplayTeacherName();
        setupLogoutButton();
        setupContactDocenteForm();
        setupProfileModalHandlers();
        setupClassCreationForm();
        setupAddStudentsForm();
        attachViewStudentsModalListeners(); // Para las tarjetas estáticas iniciales

        // Event Listener para cargar clases cuando las pestañas se activan
        const addStudentsTabButton = document.getElementById("add-students-tab");
        const myClassesTabButton = document.getElementById("my-classes-tab");

        if (addStudentsTabButton) {
          addStudentsTabButton.addEventListener("shown.bs.tab", loadTeacherClassesForSelection);
        }

        if (myClassesTabButton) {
          myClassesTabButton.addEventListener("shown.bs.tab", displayTeacherClasses);
        }

        // Cargar las clases al inicio si la pestaña "Mis Clases Existentes" es la activa por defecto (en este caso no lo es)
        // O si quieres que se precargue al cargar la página:
        // displayTeacherClasses();
        // loadTeacherClassesForSelection();
      });
      const datosDeAlumnos = {
    "student_lucas_torres": {
        alumno: "Lucas Torres",
        clase: "1º Grado 'A'",
        fecha: "7 de Julio de 2025",
        resumen: "Lucas ha mostrado un progreso constante...",
        desempenoMaterias: [
            {
                materia: "Lengua",
                promedio: "75%",
                completadas: "12/15",
                reforzar: "Comprensión de textos (Identificación de idea principal).",
                comentarios: "Buen progreso en vocabulario..."
            },
            {
                materia: "Matemáticas",
                promedio: "88%",
                completadas: "10/10",
                reforzar: "Ninguna (Excelente desempeño).",
                comentarios: "Dominio sólido de suma y resta..."
            }
            // ... más materias
        ],
        actividadReciente: [
            { fecha: "05/07/2025", descripcion: "Completó 'Ejercicios de Suma Avanzada'...", calificacion: "9/10" },
            // ... más actividades
        ],
        sugerencias: [
            "Asignar actividades de lectura con foco en la identificación de personajes y eventos clave.",
            // ... más sugerencias
        ]
    },
    // Podrías añadir otro para un "informe de clase" o para otro alumno.
};

// ... dentro de tu script principal ...

// Al hacer clic en "Informe por Alumno"
document.querySelector('#informes .btn-primary').addEventListener('click', function() {
    // Aquí podrías abrir un modal previo para que elija el alumno,
    // o para un ejemplo simple, cargar directamente el de Lucas:
    displayReport(datosDeAlumnos["student_lucas_torres"]);
});

function displayReport(reportData) {
    const reportModalElement = document.getElementById('reportModal');
    const reportModal = new bootstrap.Modal(reportModalElement);

    // Rellenar el modal con los datos de reportData
    document.getElementById('reportTitle').textContent = `Informe de Progreso de Alumno: ${reportData.alumno}`;
    document.getElementById('reportSummary').textContent = reportData.resumen;

    const materiasList = document.getElementById('reportMaterias');
    materiasList.innerHTML = ''; // Limpiar
    reportData.desempenoMaterias.forEach(materia => {
        materiasList.innerHTML += `
            <h6>${materia.materia}: ${materia.promedio}</h6>
            <ul>
                <li>Actividades Completadas: ${materia.completadas}</li>
                <li>Áreas a Reforzar: ${materia.reforzar}</li>
                <li>Comentarios: ${materia.comentarios}</li>
            </ul>
        `;
    });
    // ... y así sucesivamente para actividadReciente y sugerencias

    reportModal.show();
}
    </script>
  </body>
</html>